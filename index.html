<!DOCTYPE html>
<html lang="de">
<link rel="icon" type="image/png" href="favicon.png">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment-Remover</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #2c3e50;
            color: #ecf0f1;
        }
        h1, h2 {
            color: #ecf0f1;
        }
        textarea {
            width: 100%;
            height: 200px;
            background-color: #34495e;
            color: #ecf0f1;
            border: 1px solid #2980b9;
            border-radius: 5px;
            padding: 10px;
            font-size: 14px;
            resize: none;
        }
        button {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 10px 15px;
            margin-top: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #3498db;
        }
        #copyButton {
            display: none; /* Anfangs versteckt */
            margin-bottom: 10px;
        }
        /* Das <pre>-Element sorgt dafür, dass Leerzeichen und Zeilenumbrüche beibehalten werden */
        pre {
            background-color: #34495e;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre; /* Verwende white-space: pre, um die Formatierung exakt beizubehalten */
            word-wrap: normal; /* Kein Umbruch von langen Wörtern */
            margin-top: 10px;
            width: 100%;
        }
        .output-container {
            margin-top: 20px; /* Etwas Platz oberhalb der Ausgabe */
        }
    </style>
</head>
<body>

    <h1>Comment Remover</h1>
    <p>Code hier:</p>
    <textarea id="codeInput" placeholder="// Hier ist ein Beispielcode\n    let x = 10; // Initialisiere x\n    console.log(x); // Ausgabe"></textarea>
    
    <div class="output-container">
        <h2>Bereinigter Code:</h2>
        <button id="copyButton">Code Kopieren</button>
        <pre id="cleanedCode"></pre>
    </div>

    <script>
        function loadStoredData() {
            const storedCode = localStorage.getItem('inputCode');
            const storedCleanedCode = localStorage.getItem('cleanedCode');

            if (storedCode) {
                document.getElementById("codeInput").value = storedCode;
            }
            if (storedCleanedCode) {
                document.getElementById("cleanedCode").textContent = storedCleanedCode;
                document.getElementById("copyButton").style.display = 'inline-block'; // Button anzeigen
            }
        }

        loadStoredData();

        document.getElementById("codeInput").addEventListener("input", function() {
            const codeInput = document.getElementById("codeInput").value;
            const cleanedCode = codeInput
                .split('\n') // Teile den Code in Zeilen
                .map(line => line.split('//')[0]) // Entferne alles nach dem "//", aber trimme die Zeile nicht, um die Einrückung zu behalten
                .filter(line => line.trim()) // Filtere komplett leere Zeilen heraus
                .join('\n'); // Verbinde die verbleibenden Zeilen wieder
            
            document.getElementById("cleanedCode").textContent = cleanedCode; // Zeige den bereinigten Code an
            
            localStorage.setItem('inputCode', codeInput);
            localStorage.setItem('cleanedCode', cleanedCode);

            const copyButton = document.getElementById("copyButton");
            copyButton.style.display = cleanedCode.trim() ? 'inline-block' : 'none'; // Zeige oder verstecke den Button
        });

        document.getElementById("copyButton").addEventListener("click", function() {
            const cleanedCode = document.getElementById("cleanedCode").textContent;
            navigator.clipboard.writeText(cleanedCode).then(() => {
                alert("Code wurde kopiert!");
            }).catch(err => {
                console.error("Fehler beim Kopieren: ", err);
            });
        });
    </script>

</body>
</html>
